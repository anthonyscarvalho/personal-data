<div class="account-records">
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12">
				<form name="form" id="form" #form="ngForm" (ngSubmit)="submit()">
					<div class="row">
						<div class="col-md-3">
							<div class="form-group">
								<select class="form-control" [(ngModel)]="selectedAccount" name="accountsId">
									<option value="">Select</option>
									<option *ngFor="let account of accounts" value="{{account._id}}" [class.bg-success]="account.status == 'open'" [class.bg-danger]="account.status == 'closed'">{{account.accountDescription}} - ({{account.accountNumber}})</option>
								</select>
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group">
								<div class="custom-file">
									<input type="file" class="custom-file-input" #filePicker multiple id="filePicker" aria-describedby="inputGroupFileAddon04">
									<label class="custom-file-label" for="filePicker">Choose file</label>
								</div>
								<div class="input-group-append">
									<button class="btn btn-outline-info" type="button" id="inputGroupFileAddon04" (click)="processRecords()">Process</button>
								</div>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<button type="button" class="btn btn-info" (click)="uploadRecords()">Upload Records</button>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-2">
									<div class="form-group"> Total Rows: <br>{{totalCount}} </div>
								</div>
								<div class="col-2">
									<div class="form-group"> Recorded Records: <br>{{addedRecords}} </div>
								</div>
								<div class="col-2">
									<div class="form-group"> Existing Records: <br>{{existingRecords}} </div>
								</div>
								<div class="col-2"></div>
							</div>
							<!-- <textarea name="csvTextData" [(ngModel)]="csvTextData" rows="10" class="form-control"></textarea> -->
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<table class="table table-striped table-condensed">
								<thead>
									<tr>
										<th style="width: 70px;"></th>
										<th>Statement ID</th>
										<th>Date 1</th>
										<th>Date 2</th>
										<th>Description</th>
										<th>Credit</th>
										<th>Debit</th>
										<th>Balance</th>
										<th style="width: 40px;"></th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let item of accountRecords; let loopIndex = index">
										<td>{{loopIndex + 1}}</td>
										<td>{{item.statementId}}</td>
										<td>{{item.date1}}</td>
										<td>{{item.date2}}</td>
										<td>{{item.description}}</td>
										<td>{{item.credit}}</td>
										<td>{{item.debit}}</td>
										<td>{{item.balance}}</td>
										<td>
											<span class="badge badge-danger" *ngIf="item.processed == 'false'">&nbsp;</span>
											<span class="badge badge-success" *ngIf="item.processed == 'true'">&nbsp;</span>
											<span class="badge badge-info" *ngIf="item.processed == 'exists'">&nbsp;</span>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
